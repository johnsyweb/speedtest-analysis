<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      name="theme-color"
      content="#fafafa"
      media="(prefers-color-scheme: light)"
    />
    <meta
      name="theme-color"
      content="#121212"
      media="(prefers-color-scheme: dark)"
    />
    <title>Speedtest Analysis ‚Äî Monitor your internet speed</title>
    <meta
      name="description"
      content="Speedtest Analysis ‚Äî load and visualise speedtest-cli JSON results with interactive charts and CSV export."
    />
    <meta
      name="keywords"
      content="speedtest, network, ISP, monitoring, speedtest-cli, Chart.js, latency, bandwidth"
    />
    <!-- Atkinson Hyperlegible Font -->
    <link
      rel="preload"
      href="https://www.johnsy.com/assets/fonts/Atkinson-Hyperlegible-Regular.woff2"
      as="font"
      type="font/woff2"
      crossorigin
    />
    <link
      rel="preload"
      href="https://www.johnsy.com/assets/fonts/Atkinson-Hyperlegible-Bold.woff2"
      as="font"
      type="font/woff2"
      crossorigin
    />
    <link
      rel="preload"
      href="https://www.johnsy.com/assets/fonts/Atkinson-Hyperlegible-Italic.woff2"
      as="font"
      type="font/woff2"
      crossorigin
    />
    <link
      rel="preload"
      href="https://www.johnsy.com/assets/fonts/Atkinson-Hyperlegible-BoldItalic.woff2"
      as="font"
      type="font/woff2"
      crossorigin
    />
    <!-- Open Graph -->
    <meta property="og:title" content="Speedtest Analysis" />
    <meta
      property="og:description"
      content="Load and visualise speedtest-cli JSON results with interactive charts and CSV export."
    />
    <meta property="og:type" content="website" />
    <meta property="og:image" content="/speedtest-analysis/screenshot.png" />
    <meta
      property="og:url"
      content="https://www.johnsy.com/speedtest-analysis/"
    />
    <link
      rel="sitemap"
      type="application/xml"
      title="Sitemap"
      href="/sitemap.xml"
    />

    <!-- JSON-LD structured data -->
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "WebApplication",
        "name": "Speedtest Analysis",
        "description": "Client-side web app to load and visualise speedtest-cli JSON results. Includes charts, summaries and CSV export.",
        "url": "https://www.johnsy.com/speedtest-analysis/",
        "applicationCategory": "DeveloperTool",
        "operatingSystem": "All",
        "image": "https://www.johnsy.com/speedtest-analysis/screenshot.png"
      }
    </script>
    <style>
      @font-face {
        font-family: "Atkinson Hyperlegible";
        src: url("https://www.johnsy.com/assets/fonts/Atkinson-Hyperlegible-Regular.woff2")
          format("woff2");
        font-weight: 400;
        font-style: normal;
        font-display: swap;
      }
      @font-face {
        font-family: "Atkinson Hyperlegible";
        src: url("https://www.johnsy.com/assets/fonts/Atkinson-Hyperlegible-Bold.woff2")
          format("woff2");
        font-weight: 700;
        font-style: normal;
        font-display: swap;
      }
      @font-face {
        font-family: "Atkinson Hyperlegible";
        src: url("https://www.johnsy.com/assets/fonts/Atkinson-Hyperlegible-Italic.woff2")
          format("woff2");
        font-weight: 400;
        font-style: italic;
        font-display: swap;
      }
      @font-face {
        font-family: "Atkinson Hyperlegible";
        src: url("https://www.johnsy.com/assets/fonts/Atkinson-Hyperlegible-BoldItalic.woff2")
          format("woff2");
        font-weight: 700;
        font-style: italic;
        font-display: swap;
      }

      html,
      body {
        margin: 0;
        padding: 0;
      }
      body {
        font-family:
          "Atkinson Hyperlegible", "Segoe UI", Tahoma, Geneva, Verdana,
          sans-serif;
        font-size: 15px;
        line-height: 1.7;
        display: flex;
        flex-direction: column;
        min-height: 100vh;
      }
      a,
      a:active,
      a:visited {
        text-decoration: none;
        padding-bottom: 2px;
      }
      a:hover {
        text-decoration: none;
      }

      .skip-link {
        position: absolute;
        top: -40px;
        left: 0;
        padding: 8px;
        z-index: 100;
      }
      .skip-link:focus {
        top: 0;
      }

      #header {
        flex-shrink: 0;
        margin-bottom: 50px;
      }
      .header-inner {
        max-width: 65ch;
        margin: 0 auto;
        padding: 1rem 10px;
      }
      #header .breadcrumbs {
        display: flex;
        flex-wrap: wrap;
        align-items: center;
        gap: 0.5rem;
        font-size: 0.85rem;
        margin-bottom: 0.75rem;
        padding: 0.35rem 0.6rem;
        border-radius: 999px;
        width: fit-content;
      }
      #header .breadcrumbs a {
        border: none;
      }
      #header .breadcrumbs span[aria-current="page"] {
        font-weight: 600;
      }
      #header h1 {
        font-size: 32px;
        margin: 0 0 4px 0;
      }
      #header h1 a {
        border: none;
      }
      #header .header-tagline {
        margin: 0;
        font-size: 0.95em;
        opacity: 0.95;
      }

      #page {
        max-width: 1400px;
        width: 100%;
        margin: 0 auto;
        padding: 0 10px;
        flex: 1 0 0;
      }
      #content.container {
        max-width: 1400px;
        margin: 0 auto;
        padding: 30px 10px;
      }
      #content h2 {
        border-bottom: 2px solid;
        padding-bottom: 10px;
        margin-top: 40px;
      }
      #content h2:first-of-type {
        margin-top: 0;
      }

      #footer {
        flex-shrink: 0;
        margin-top: 50px;
        font-size: 0.85em;
      }
      .footer-inner {
        max-width: 65ch;
        margin: 0 auto;
        padding: 1rem 10px;
      }
      #footer a {
        border: none;
      }

      .loading {
        text-align: center;
        padding: 50px;
      }
      .error {
        text-align: center;
        padding: 50px;
      }
      .file-input-container {
        margin: 20px 0;
        padding: 20px;
        border: 2px dashed;
        border-radius: 8px;
        text-align: center;
      }
      .file-input {
        margin: 10px 0;
      }
      .chart-container {
        position: relative;
        height: 400px;
        margin: 20px 0;
        cursor: pointer;
      }
      .chart-container:hover {
        border-radius: 8px;
      }
      .chart-instructions {
        text-align: center;
        font-style: italic;
        margin-bottom: 10px;
      }
      .summary-stats {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 20px;
        margin: 20px 0;
      }
      .stat-card {
        padding: 20px;
        border-radius: 8px;
        text-align: center;
        border-left: 4px solid;
      }
      .stat-value {
        font-size: 2em;
        font-weight: bold;
      }
      .stat-label {
        margin-top: 5px;
      }
      table {
        width: 100%;
        border-collapse: collapse;
        margin: 20px 0;
      }
      th,
      td {
        padding: 12px;
        text-align: left;
        border-bottom: 1px solid;
      }
      th {
        font-weight: bold;
      }
      .btn {
        padding: 10px 20px;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        margin: 5px;
      }
      .welcome-section {
        padding: 40px;
        border-radius: 12px;
        margin-bottom: 30px;
        text-align: center;
      }
      .welcome-section h2 {
        border-bottom: 2px solid rgba(0, 0, 0, 0.2);
        margin-top: 0;
      }
      .welcome-section h3 {
        margin-top: 25px;
        text-align: left;
      }
      .welcome-section p {
        font-size: 1.1em;
        line-height: 1.6;
      }
      .welcome-section ul {
        text-align: left;
        display: inline-block;
      }
      .welcome-section li {
        margin: 8px 0;
      }
      .welcome-section code {
        padding: 2px 6px;
        border-radius: 4px;
        font-family: "Courier New", monospace;
      }
      .welcome-section .ready-p {
        margin-top: 20px;
        opacity: 0.95;
      }

      @media (prefers-color-scheme: light) {
        .skip-link,
        .skip-link:focus {
          background-color: #0d47a1;
          color: #fafafa;
        }
        html,
        body {
          background-color: #fafafa;
          color: #212121;
        }
        a,
        a:active,
        a:visited {
          color: #1565c0;
          border-bottom: 1px solid #bbdefb;
        }
        a:hover {
          color: #0d47a1;
          background-color: #bbdefb;
        }
        h1,
        h2,
        h3 {
          color: #1565c0;
        }
        #header {
          background-color: #1565c0;
          color: #fafafa;
        }
        #header .breadcrumbs {
          background-color: rgba(0, 0, 0, 0.25);
          color: #fafafa;
        }
        #header .breadcrumbs a {
          color: #fafafa;
        }
        #header .breadcrumbs a:hover {
          background-color: transparent;
          color: #fafafa;
          border-bottom-color: #fafafa;
        }
        #header h1 a,
        #header h1 a:visited,
        #header h1 a:active {
          color: #fafafa;
        }
        #header h1 a:hover {
          background-color: rgba(250, 250, 250, 0.15);
          border-color: transparent;
          color: #fafafa;
        }
        #header .header-tagline,
        #header .header-tagline a {
          color: #fafafa;
          border-color: rgba(250, 250, 250, 0.6);
        }
        #header .header-tagline a:hover {
          background-color: rgba(250, 250, 250, 0.15);
          border-bottom-color: #fafafa;
        }
        #footer {
          background-color: #1565c0;
          color: #fafafa;
          border-top: none;
        }
        #footer a,
        #footer a:visited,
        #footer a:active {
          color: #fafafa;
          border-color: rgba(250, 250, 250, 0.6);
        }
        #footer a:hover {
          background-color: rgba(250, 250, 250, 0.15);
          color: #fafafa;
          border-bottom-color: #fafafa;
        }
        #content.container {
          background-color: #fafafa;
        }
        #content h2 {
          border-color: #1565c0;
          color: #1565c0;
        }
        .loading {
          color: #616161;
        }
        .error {
          color: #d32f2f;
        }
        .file-input-container {
          border-color: #1565c0;
          background-color: #e3f2fd;
        }
        .chart-container:hover {
          background-color: #e3f2fd;
        }
        .chart-instructions {
          color: #616161;
        }
        .stat-card {
          background-color: #e3f2fd;
          border-left-color: #1565c0;
        }
        .stat-value {
          color: #212121;
        }
        .stat-label {
          color: #616161;
        }
        th,
        td {
          border-color: #e0e0e0;
        }
        th {
          background-color: #e3f2fd;
        }
        .public-ip {
          background-color: #ffebee;
        }
        .private-ip {
          background-color: #e3f2fd;
        }
        .btn {
          background-color: #1565c0;
          color: #fafafa;
        }
        .btn:hover {
          background-color: #0d47a1;
          color: #fafafa;
        }
        .welcome-section {
          background-color: #1565c0;
          color: #fafafa;
        }
        .welcome-section h2,
        .welcome-section h3 {
          color: #fafafa;
        }
        .welcome-section code {
          background-color: rgba(0, 0, 0, 0.2);
          color: #fafafa;
        }
      }
      @media (prefers-color-scheme: dark) {
        .skip-link,
        .skip-link:focus {
          background-color: #1976d2;
          color: #121212;
        }
        html,
        body {
          background-color: #121212;
          color: #e0e0e0;
        }
        a,
        a:active,
        a:visited {
          color: #64b5f6;
          border-bottom: 1px solid #1976d2;
        }
        a:hover {
          color: #90caf9;
          background-color: #1976d2;
        }
        h1,
        h2,
        h3 {
          color: #64b5f6;
        }
        #header {
          background-color: #64b5f6;
          color: #121212;
        }
        #header .breadcrumbs {
          background-color: rgba(18, 18, 18, 0.12);
          color: #121212;
        }
        #header .breadcrumbs a {
          color: #121212;
        }
        #header .breadcrumbs a:hover {
          background-color: transparent;
          color: #121212;
          border-bottom-color: #121212;
        }
        #header h1 a,
        #header h1 a:visited,
        #header h1 a:active {
          color: #121212;
        }
        #header h1 a:hover {
          background-color: rgba(18, 18, 18, 0.1);
          border-color: transparent;
          color: #121212;
        }
        #header .header-tagline,
        #header .header-tagline a {
          color: #121212;
          border-color: rgba(18, 18, 18, 0.6);
        }
        #header .header-tagline a:hover {
          background-color: rgba(18, 18, 18, 0.1);
          border-bottom-color: #121212;
        }
        #footer {
          background-color: #64b5f6;
          color: #121212;
        }
        #footer a,
        #footer a:visited,
        #footer a:active {
          color: #121212;
          border-color: rgba(18, 18, 18, 0.6);
        }
        #footer a:hover {
          background-color: rgba(18, 18, 18, 0.1);
          color: #121212;
          border-bottom-color: #121212;
        }
        #content.container {
          background-color: #121212;
        }
        #content h2 {
          border-color: #64b5f6;
          color: #64b5f6;
        }
        .loading {
          color: #bdbdbd;
        }
        .error {
          color: #ef5350;
        }
        .file-input-container {
          border-color: #64b5f6;
          background-color: #1e1e1e;
        }
        .chart-container:hover {
          background-color: #1e1e1e;
        }
        .chart-instructions {
          color: #bdbdbd;
        }
        .stat-card {
          background-color: #1e1e1e;
          border-left-color: #64b5f6;
        }
        .stat-value {
          color: #e0e0e0;
        }
        .stat-label {
          color: #bdbdbd;
        }
        th,
        td {
          border-color: #2c2c2c;
        }
        th {
          background-color: #1e1e1e;
        }
        .public-ip {
          background-color: #3e2723;
        }
        .private-ip {
          background-color: #1e3a5f;
        }
        .btn {
          background-color: #64b5f6;
          color: #121212;
        }
        .btn:hover {
          background-color: #90caf9;
          color: #121212;
        }
        .welcome-section {
          background-color: #64b5f6;
          color: #121212;
        }
        .welcome-section h2,
        .welcome-section h3 {
          color: #121212;
        }
        .welcome-section code {
          background-color: rgba(0, 0, 0, 0.2);
          color: #e0e0e0;
        }
      }
    </style>
  </head>
  <body>
    <a href="#content" class="skip-link">Skip to main content</a>
    <header id="header">
      <div class="header-inner">
        <nav class="breadcrumbs" aria-label="Breadcrumb">
          <a href="https://www.johnsy.com/">johnsy.com</a>
          <span aria-hidden="true">/</span>
          <span aria-current="page">Speedtest Analysis</span>
        </nav>
        <h1><a href="https://www.johnsy.com/">johnsy.com</a></h1>
        <p class="header-tagline">
          Speedtest Analysis ‚Äî Monitor your internet speed
        </p>
      </div>
    </header>

    <div id="page">
      <main id="content" class="container" role="main">
        <h2>Speedtest Analysis</h2>

        <div id="welcomeSection" class="welcome-section">
          <h2>‚ùì Why use this tool?</h2>
          <p>
            Monitor your internet speed over time to investigate network issues,
            verify ISP performance, and track changes. This tool helps you
            collect and visualize speedtest results from your own
            infrastructure.
          </p>

          <h3>üìä How to get started:</h3>
          <ol>
            <li>
              <strong>Generate speedtest data</strong> by running the automated
              collection scripts
            </li>
            <li>
              <strong>Load your JSON files</strong> into this app using the file
              picker below
            </li>
            <li>
              <strong>Explore interactive charts</strong> and detailed
              statistics
            </li>
            <li><strong>Export results</strong> as CSV for further analysis</li>
          </ol>

          <h3>üöÄ Quick setup (macOS):</h3>
          <ul>
            <li>
              Clone the project:
              <code
                >git clone
                https://github.com/johnsyweb/speedtest-analysis.git</code
              >
            </li>
            <li>
              Install dependencies:
              <code>brew install speedtest-cli jc jq</code>
            </li>
            <li>Run a test: <code>./speedtest.sh</code></li>
            <li>
              Enable automation:
              <code
                >cp com.speedtest.plist ~/Library/LaunchAgents/ && launchctl
                load ~/Library/LaunchAgents/com.speedtest.plist</code
              >
            </li>
            <li>Results saved to: <code>~/SpeedtestResults/</code></li>
          </ul>
          <p class="ready-p">
            <strong>Ready?</strong> Select your speedtest JSON files below and
            click "Load Data"
          </p>
        </div>

        <div class="file-input-container">
          <h3>Load Speedtest Data</h3>
          <p>Select JSON files from your speedtest results directory:</p>
          <input
            type="file"
            id="fileInput"
            class="file-input"
            multiple
            accept=".json"
          />
          <button id="loadDataBtn" class="btn">Load Data</button>
        </div>

        <div id="loadingIndicator" class="loading" style="display: none">
          <h3>Loading and processing data...</h3>
          <p>Please wait while we analyze your speedtest results.</p>
        </div>

        <div id="errorMessage" class="error" style="display: none">
          <h3>Error Loading Data</h3>
          <p id="errorText"></p>
        </div>

        <div id="dataPanel" style="display: none">
          <div id="summaryStats" class="summary-stats"></div>

          <h2>Interactive Chart</h2>
          <div class="chart-instructions">
            Click on any data point to open the speedtest result
          </div>
          <div class="chart-container">
            <canvas id="speedChart"></canvas>
          </div>

          <h2>Detailed Results</h2>
          <div id="detailedTable"></div>

          <h2>Export Data</h2>
          <button id="downloadCsvBtn" class="btn">Download CSV</button>
          <div id="csvData" style="display: none"></div>
        </div>
      </main>
    </div>

    <footer id="footer">
      <div class="footer-inner">
        <p>
          Copyright &copy; 2000-<span id="footer-year"></span>
          <a rel="author" href="https://www.johnsy.com/about/"
            ><em><abbr title="Peter Alexander Johns">paj</abbr></em></a
          >
          All rights (and some wrongs) reserved.
        </p>
        <p>
          Hosted by <a href="https://github.com">GitHub</a>, powered by
          <a href="https://jekyllrb.com">Jekyll</a>.
        </p>
      </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns@3.0.0/dist/chartjs-adapter-date-fns.bundle.min.js"></script>
    <script type="module" src="/src/main.ts"></script>
  </body>
</html>
